<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birraya | Learn Gudjal</title>
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Bitter:ital,wght@0,100..900;1,100..900&family=Cormorant+SC:wght@300;400;500;600;700&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Nunito:ital,wght@0,200..1000;1,200..1000&family=Raleway:ital,wght@0,100..900;1,100..900&family=Rock+Salt&display=swap');

    @media (max-width: 600px) {
        .top-button-container * {
            font-size: 12px;
        }
        td {
            font-size: 12px;
        }
    }

    * {
        font-family: 'Noto Sans', sans-serif;
        font-weight: 200;
        box-sizing: border-box;
    }
    
    p {
        line-height: 28px;
    }

    body {
        background: #FBFAF5;
        padding: 12px;
    }

    .button {
        /* Shape, colour, size */
        background: #282828;
        border-radius: 16px;
        font-weight: 400;
        padding: 0 16px 0 16px;

        /* Text */
        color: white;
        text-decoration: none;
        text-align: center;

        /* Flex */
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .button:hover {
        cursor: pointer;
    }

    .lesson-container {
        width: 100%;
        max-width: 600px;
        margin: 20px auto;
    }

    .top-button-container {
        height: 50px;
        width: 100%;
        display: flex;
        justify-content: center;
    }

    .top-button {
        height: 100%;
        margin: 0 8px 0 8px;
    }

    h1, h2 {
        margin-top: 40px;
        width: 100%;
        text-align: center;
    }

    h1, h2, h3, h4 {
        font-weight: 500;
    }

    table {
        table-layout: fixed;
        width: 100%;
    }

    .dialogue-table tr td:first-child {
        width: 15%;
    }

    tr td:first-child {
        font-weight: 400;
    }

    .ct-image {
        width: 100%;
        border-radius: 8px;
        margin: 16px 0px;
    }

    #ct-image-night {
        display: none;
    }

    .wordlist {
        border-collapse: collapse;
    }

    .wordlist,
    .wordlist tbody,
    .wordlist tbody tr {
        width: 100%;
    }

    .wordlist tbody tr td {
        border: 1px solid black;
        padding: 4px;
        width: 50%;
        text-align: center;
    }

    .practice-button {
        height: 100px;
        width: 300px;
        margin: 60px auto;
        font-size: 20px;
    }



    .playing {
        font-weight: bold;
        color: brown;
    }

    .clickable-audio {
        cursor: pointer;
    }

    .clickable-audio:hover {
        font-weight: bold;
        color: brown;
    }

    #play-dialogue {
        height: 50px;
        font-size: 16px;
        border: none;
    }

    h3 {
        display: flex;
        align-items: center;
    }

    .play-audio:hover {
        font-weight: bold;
        color: brown;
        cursor: pointer;
    }

    /* Modal stuff. */

    .backdrop {
        background: #282828;
        opacity: 70%;
        position: fixed;
        inset: 0;
        z-index: 1;
        display: none;
    }

    .modal {
        width: 90%;
        max-width: 800px;
        height: 80vh;
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        background: #FBFAF5;
        border: 2px solid #282828;
        z-index: 2;
        border-radius: 16px;

        display: none;
        flex-flow: column;
        align-items: center;
        justify-content: space-between;
        padding: 0;
    }

    .exit-modal-button {
        margin: 0;
        padding: 0;
        width: 56px;
        height: 56px;
        border-radius: 0 12px 0 16px;
        color: black;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 28px;
        z-index: 5;
    }

    .exit-modal-button:hover {
        cursor: pointer;
    }

    .exit-modal-button-container {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 0;
        display: flex;
        justify-content: flex-end;
    }

    #question-box {
        width: 80%;
        height: 100px;

        display: flex;
        flex-flow: column;
        justify-content: space-evenly;
        align-items: center;
    }

    #yaru-explanation {
        width: 300px;
        height: 50px;
        margin: 40px 0 0 0;
    }

    #question-box > * {
        width: 90%;
        height: 40%;
    }

    #answers-box {
        width: 80%;
        height: 50%;

        display: flex;
        flex-flow: column;
        justify-content: space-evenly;
        align-items: center;
    }

    .answer-button {
        width: 90%;
        height: 25%;
        border-radius: 16px;
        border: 2px solid #282828;
        background: white;
    }

    .submit-button {
        height: 40px;
        width: 200px;
        margin-bottom: 32px;
        border-radius: 16px;
        background: #282828;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-weight: 400;
    }

    .submit-button:hover {
        cursor: pointer;
    }

    .prompting-div, #where-the-question-goes {
        font-size: 20px;
        text-align: center;
        font-weight: 400;
    }

    .answer-button {
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 20px;
        font-weight: 200;
    }

    .answer-button:hover {
        cursor: pointer;
    }

    .extra-test-buttons-container {
        width: 70%;
        display: flex;
        justify-content: space-between;
    }

    .restart-button {
        height: 40px;
        width: 100px;
        margin-bottom: 32px;
        border-radius: 16px;
        background: #B3B3B3;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-weight: 400;
    }

    .restart-button:hover {
        cursor: pointer;
    }

    .no-scroll {
        overflow: hidden;
    }

    .progress-bar-outline {
        height: 16px;
        border-radius: 16px;
        border: 2px solid black;
        width: 70%;
        display: flex;
        justify-content: flex-start;
    }

    .progress-bar-inside {
        height: 100%;
        width: 0%;
        max-width: 100%;
        border-radius: 16px;
        background: #A0C57F;
        transition: width 0.4s ease;
    }

    #victory-screen {
        position: fixed;
        height: 100%;
        width: 100%;
        z-index: 4;
        background: #FBFAF5;
        border-radius: 14px;

        display: none;
        justify-content: space-around;
        align-items: center;
        flex-flow: column;
    }

    </style>
</head>
<body>

    <div class="lesson-container">
        <div class="top-button-container">
            <div id="nightmode-button" class="button top-button">Night Mode</div>
            <div id="top-practice-button" class="button review-button top-button">Review this lesson</div>
            <a href="/" id="back-to-lessons" class="button top-button">Back to lessons</a>
        </div>
        
        <h1>Chapter 1: Ngaygu riyala...</h1>
        <p>Yaru! Hello! Welcome to your first Gudjal lesson of this course. In this chapter, we'll be learning to introduce ourselves. Gudjal birraya ngali. Let's talk Gudjal together.</p>
        
        <h2>Dialogue</h2>
        <img id="ct-image-day" class="ct-image" src="conversation.png" alt="An illustration of a man and a woman having a conversation.">
        <img id="ct-image-night" class="ct-image" src="conversation-night.png" alt="An illustration of a man and a woman having a conversation at night.">
        <h3>Gudjal</h3>
        <button id="play-dialogue" class="button">► Play full dialogue.</button>
        <p><i>(Or click on any line of dialogue to hear just that line.)</i></p>
        <table class="dialogue-table">
            <tbody>
                <tr><td>Keesha:</td> 		<td class="clickable-audio" data-audio="Keesha1">Yaru!</td></tr>
                <tr><td>William:</td> 	    <td class="clickable-audio" data-audio="William1">Yaru!</td></tr>
                <tr><td>Keesha:</td> 		<td class="clickable-audio" data-audio="Keesha2">Ngani yinda?</td></tr>
                <tr><td>William:</td> 	    <td class="clickable-audio" data-audio="William2">Ngaya William. Ngani yinu riyala?</td></tr>
                <tr><td>Keesha:</td> 		<td class="clickable-audio" data-audio="Keesha3">Ngaygu riyala Keesha. Ngani yinu yaguy?</td></tr>
                <tr><td>William:</td> 	    <td class="clickable-audio" data-audio="William3">Ngaygu yaguy Gurrguru. Ngani yinu yaguy?</td></tr>
                <tr><td>Keesha:</td> 		<td class="clickable-audio" data-audio="Keesha4">Ngaygu Wudhurrayngan.</td></tr>
            </tbody>
        </table>
        <h3>English</h3>
        <table class="dialogue-table">
            <tbody>
                <tr><td>Keesha:</td> 		<td>Hello!</td></tr>
                <tr><td>William:</td> 	    <td>Hello!</td></tr>
                <tr><td>Keesha:</td> 		<td>Who are you?</td></tr>
                <tr><td>William:</td> 	    <td>I'm William. What's your name?</td></tr>
                <tr><td>Keesha:</td> 		<td>My name is Keesha. What is your skin?</td></tr>
                <tr><td>William:</td> 	    <td>My skin is Gurrguru. What is yours?</td></tr>
                <tr><td>Keesha:</td> 		<td>Mine is Wudhurrayngan.</td></tr>
            </tbody>
        </table>
        <h2>Word List</h2>
        <p style="text-align: center;">Click on a vocabulary item to hear how it's pronounced.</p>
        <table class="wordlist">
            <tbody>
                <tr><td class="play-audio" data-audio="audio/yaru1.m4a">Yaru</td>	                <td>Hello / here / this</td></tr>
                <tr><td class="play-audio" data-audio="audio/ngani.m4a">Ngani</td>	            <td>Who / what</td></tr>
                <tr><td class="play-audio" data-audio="audio/yinda.m4a">Yinda</td>	            <td>You</td></tr>
                <tr><td class="play-audio" data-audio="audio/ngaya.m4a">Ngaya</td>	            <td>I</td></tr>
                <tr><td class="play-audio" data-audio="audio/yinu.m4a">Yinu</td>	    <td>Your</td></tr>
                <tr><td class="play-audio" data-audio="audio/ngaygu.m4a">Ngaygu</td>	            <td>My</td></tr>
                <tr><td class="play-audio" data-audio="audio/riyala.m4a">Riyala</td>	        <td>Name / tooth</td></tr>
                <tr><td class="play-audio" data-audio="audio/yaguy.m4a">Yaguy</td>	        <td>Skin</td></tr>
            </tbody>
        </table>
        <h2>Grammar</h2>

        <h3>Ngaya...</h3>
        <p>You might have noticed that Ngaya William direct translates to "I William". The same thing for ngani yinda "who you?". In Gudjal, we use two words, but in English we use three. This is completely natural and normal for Gudjal speakers. We don't need to say "am", "are" or "is" to understand what people mean. </p>
        
        <h2>Vocabulary</h2>

        <h3>Yaru</h3>
        <p>As you can see above, yaru means lots of different things. Yaru originally only meant "here" or "this". Gudjal probably didn't have a word exactly like "hello" before colonisation. But nowadays, people like to start conversations with "hello", so we needed to choose a Gudjal word that meant something similar.</p>
        <p>It might seem a bit strange to choose the word "here" to mean "hello", but Elder Freddie Toomba gave us this information about the word yaru.</p>

        <div class="button" id="yaru-explanation">► Listen to Elder Freddie Toomba.</div>

        <p><i>Transcript: "Yeah, you come to a town, you see that fella, you say... you sing out: Yaru! Yaru means: I'm here."</i></p>
        <p>When you think about it, that's what the word "hello" does, too. You're telling people that you're here and you're ready to start talking.</p>

        <h3>Riyala</h3>
        <p>In Gudjal, we didn't originally have a record for "name". It was lost. Luckily, in lots of Aboriginal languages in Queensland, the word for "name" is the same word for "tooth". We have a word for "tooth" in Gudjal. It's riyala. It's likely that riyala also meant name for Gudjal people. </p>
        
        <h3>Yaguy</h3>
        <p>In lots of Aboriginal cultures, everyone belongs to a skin group. Your skin group depends on the skin group of your parents. It tells people about your relationship to other people in the community. Traditionally, it also told you who it would be best to marry. </p>
        <p>Yaguy means skin in Gudjal (the skin on your body). In English, and some Aboriginal languages, skin (body) and skin (group) are the same word. This probably wasn't the case in Gudjal. Unfortunately, we don't have a record of a generic term for skin group in any nearby languages. So, for now, to talk about social groups in Gudjal culture, we're using the term that Aboriginal people already know and use in English: skin. </p>
        
        <h2>Practice Activities</h2>
        <h3>Classroom Activity</h3>
        <p>Grab a partner and practice introducing yourselves in Gudjal. Don't worry if you don't have a skin group. Just focus on asking and telling each other your names.</p>

        <div class="review-button button practice-button">Review Lesson</div>
    </div>

    <div class="backdrop"></div>

    <div class="modal">
        <div class="exit-modal-button-container"><div class="exit-modal-button button">✕</div></div>
            <div class="progress-bar-outline"><div class="progress-bar-inside"></div></div>
            <div id="question-box">
                <div class="prompting-div">Translate the following into Gudjal:</div>
                <div id="where-the-question-goes">[testing]</div>
            </div>
            <div id="answers-box">
                <div class="answer-button" id="answer-one">[example]</div>
                <div class="answer-button" id="answer-two">[example]</div>
                <div class="answer-button" id="answer-three">[example]</div>
            </div>
            <div class="extra-test-buttons-container">
                <div class="restart-button">Restart</div>
                <div class="submit-button">Submit</div>
            </div>
            <div id="victory-screen"><img src="congration.png" alt="An image of a cake which has the following words written on it: 'Congration! You done it!'">
                <div class="restart-button">Restart</div>
            </div>
        
    </div>

<script>

    // Non-game stuff

    const nightModeButton = document.querySelector("#nightmode-button");
    const body = document.querySelector("body");
    let nightModeToggled = false;

    const readables = document.querySelectorAll("h1, h2, h3, h4, p, td");

    const clickables = document.querySelectorAll(".clickable-audio");

    const buttons = document.querySelectorAll(".button");

    const dayImage = document.querySelector("#ct-image-day");
    const nightImage = document.querySelector("#ct-image-night");

    const audioKeesha1 = new Audio("audio/yaru1.m4a");
    const audioKeesha2 = new Audio("audio/ngani-yinda.m4a");
    const audioKeesha3 = new Audio("audio/ngaygu-riyala-keesha.m4a");
    const audioKeesha4 = new Audio("audio/ngaygu-wudhurrayngan.m4a");

    const audioWilliam1 = new Audio("audio/yaru2.m4a");
    const audioWilliam2 = new Audio("audio/ngaya-william.m4a");
    const audioWilliam3 = new Audio("audio/ngaygu-yaguy-gurrguru.m4a");

    const toombaYaruExplanation = new Audio("audio/toomba-yaru.mp3")
    const yaruExplanationButton = document.querySelector("#yaru-explanation");

    const playDialogueButton = document.querySelector("#play-dialogue");

    const restartButtons = document.querySelectorAll(".restart-button");

    let currentlyPlayingAudio = null;
    let currentlyPlayingElement = null;

    const dialogueOrder = [audioKeesha1, audioWilliam1, audioKeesha2, audioWilliam2, audioKeesha3, audioWilliam3, audioKeesha4];

    const audioDirectory = {
        Keesha1: audioKeesha1,
        Keesha2: audioKeesha2,
        Keesha3: audioKeesha3,
        Keesha4: audioKeesha4,
        William1: audioWilliam1,
        William2: audioWilliam2,
        William3: audioWilliam3
    }

    const allAudio = Object.values(audioDirectory);

    function stopAllAudio () {
        allAudio.forEach(audio => {
            audio.pause();
            audio.currentTime = 0;
        })
    }

    function toggleNightMode () {
        if (nightModeToggled === false) {
            nightModeToggled = true;
        } else if (nightModeToggled === true) {
            nightModeToggled = false;
        }

        if (nightModeToggled === true) {
            body.style.backgroundColor = "#282828";
            nightImage.style.display = "block";
            buttons.forEach(button => {
                button.style.backgroundColor = "#FBFAF5";
                button.style.color = "#282828";
            });
            dayImage.style.display = "none";
            readables.forEach(readable => {
                readable.style.color = "#FBFAF5";
            });
        } else if (nightModeToggled === false) {
            body.style.backgroundColor = "#FBFAF5";
            nightImage.style.display = "none";
            dayImage.style.display = "block";
            buttons.forEach(button => {
                button.style.backgroundColor = "#282828";
                button.style.color = "#FBFAF5";
            });
            readables.forEach(readable => {
                readable.style.color = "#282828";
            });
        }
    }

    nightModeButton.addEventListener ("click", () => {
        toggleNightMode();
    })

    function playAudio(audioClip) {
        Object.values(audioDirectory).forEach(audio => {
            audio.pause();
            audio.currentTime = 0;
        });

        audioClip.play();
    }

    clickables.forEach(element => {
        element.addEventListener("click", () => {

            stopAllAudio();

            const key = element.dataset.audio;
            const audio = audioDirectory[key];

            if (currentlyPlayingAudio) {
                currentlyPlayingAudio.pause();
                currentlyPlayingAudio.currentTime = 0;
            }

            if (currentlyPlayingElement) {
                currentlyPlayingElement.classList.remove("playing");
            }

            currentlyPlayingAudio = audio;
            currentlyPlayingElement = element;

            audio.play();
            element.classList.add("playing");

            audio.addEventListener("ended", () => {
                element.classList.remove("playing");
                currentlyPlayingAudio = null;
                currentlyPlayingElement = null;
            }, { once: true })
        })
    })

    function playDialogueAt (index) {
        if (index >= dialogueOrder.length) {
            return;
        }

        const currentAudio = dialogueOrder[index];

        currentAudio.currentTime = 0;
        currentAudio.play();

        currentAudio.addEventListener("ended", () => {
            playDialogueAt(index + 1);
        }, { once: true});
    }

    playDialogueButton.addEventListener("click", () => {
        stopAllAudio();
        playDialogueAt(0);
    })

    yaruExplanationButton.addEventListener("click", () => {
        toombaYaruExplanation.play();
    })

    document.addEventListener("click", (e) => {
        const target = e.target.closest(".play-audio");
        if (!target) {
            return;
        }

        const file = target.dataset.audio;
        const audio = new Audio(`${file}`);
        audio.play();
    })





































    // Game stuff

    const backdrop = document.querySelector(".backdrop");
    const exitModalButton = document.querySelector(".exit-modal-button");
    const modal = document.querySelector(".modal");

    const thingsThatExitModalScreen = [backdrop, exitModalButton];

    const thingsThatEnterModalScreen = document.querySelectorAll(".review-button");

    const answerOne = document.querySelector("#answer-one");
    const answerTwo = document.querySelector("#answer-two");
    const answerThree = document.querySelector("#answer-three");

    const answerButtons = [answerOne, answerTwo, answerThree];

    const whereTheQuestionGoes = document.querySelector("#where-the-question-goes");

    const victoryScreen = document.querySelector("#victory-screen");

    let gameCompletionRate = 0;

    let theQuestion;
    let theAnswer;

    let selectedAnswer = null;

    let correctAnswerButton;

    let theAnswerIsCorrect = false;
    let theAnswerHasBeenChecked = false;

    const progressBar = document.querySelector(".progress-bar-inside");

    const submitButton = document.querySelector(".submit-button");

    let theseQuestionHaveBeenAskedAlready = [];

    function exitModalScreen () {
        backdrop.style.display = "none";
        modal.style.display = "none";
        body.classList.remove("no-scroll");
    }

    function enterModalScreen () {
        backdrop.style.display = "block";
        modal.style.display = "flex";
        body.classList.add("no-scroll");
    }

    thingsThatExitModalScreen.forEach((element) => {
        element.addEventListener("click", () => {
            exitModalScreen();
        })
    })

    thingsThatEnterModalScreen.forEach((element) => {
        element.addEventListener("click", () => {
            enterModalScreen();
        })
    })

    const questionsAndAnswers = {
        "hello / here / this": "yaru",
        "who / what": "ngani",
        "you": "yinda",
        "I": "ngaya",
        "my": "ngaygu",
        "your": "yinu",
        "name / tooth": "riyala",
        "skin": "yaguy",
        "My name is...": "Ngaygu riyala...",
        "Who are you?": "Ngani yinda?",
        "What's your name?": "Ngani yinu riyala?",
        "What's your skin?": "Ngani yinu yaguy?",
        "My skin is...": "Ngaygu yaguy...",
        "My skin is Gurrguru.": "Ngaygu yaguy Gurrguru.",
        "My skin is Wudhurrayngan.": "Ngaygu yaguy Wudhurrayngan.",
        "Is your skin Gurrguru?": "Yinu yaguy Gurrguru?",
        "Is your skin Wudhurrayngan?": "Yinu yaguy Wudhurrayngan?"
    }


    function startGame () {
        victoryScreen.style.display = "none";
        theseQuestionHaveBeenAskedAlready = [];
        gameCompletionRate = 0;
        progressBar.style.width = `${gameCompletionRate}%`;
        theAnswerHasBeenChecked = false;
        theAnswerIsCorrect = false;
        newQuestion();
    }

    function selectRandomKey (object) {
        const listOfKeys = Object.keys(object);
        return listOfKeys[Math.floor(Math.random() * listOfKeys.length)];
    }

    function newQuestion () {

        theAnswerHasBeenChecked = false;

        answerButtons.forEach(element => element.style.background = "white");

        theQuestion = getUnaskedQuestion();
        theAnswer = questionsAndAnswers[theQuestion];

        let incorrectAnswer1 = getIncorrectAnswer(theAnswer);
        let incorrectAnswer2 = getIncorrectAnswer(theAnswer, incorrectAnswer1);

        const answers = [theAnswer, incorrectAnswer1, incorrectAnswer2];

        answers.sort(() => Math.random() - 0.5);

        loadAnswers(theQuestion, answers);
    }

    function getUnaskedQuestion () {
        let question;

        do {
            question = selectRandomKey(questionsAndAnswers);
        } while (theseQuestionHaveBeenAskedAlready.includes(question));

        return question
    }

    function getIncorrectAnswer (theRealAnswer, firstIncorrectAnswer = null) {
        let possibleIncorrectAnswer

        do {
            possibleIncorrectAnswer = questionsAndAnswers[selectRandomKey(questionsAndAnswers)];
        } while (possibleIncorrectAnswer === theRealAnswer || possibleIncorrectAnswer === firstIncorrectAnswer);

        return possibleIncorrectAnswer;
    }

    function loadAnswers(question, answerSelection) {

        whereTheQuestionGoes.textContent = question;

        answerOne.textContent = answerSelection[0];
        answerTwo.textContent = answerSelection[1];
        answerThree.textContent = answerSelection[2];

        for (const button of answerButtons) {
            if (button.textContent === theAnswer) {
                correctAnswerButton = button;
                break;
            }
        }
    }

    startGame();

    function checkQuestion () {
        theAnswerHasBeenChecked = true;
        if (selectedAnswer.textContent === theAnswer) {
            rightAnswer();
        } else if (selectedAnswer != theAnswer) {
            wrongAnswer();
        }
    }

    function rightAnswer () {
        theseQuestionHaveBeenAskedAlready.push(theQuestion);
        theAnswerIsCorrect = true;
        gameCompletionRate += 10;
        progressBar.style.width = `${gameCompletionRate}%`;
        checkForWin();
    }

    function checkForWin () {
        if (gameCompletionRate >= 100) {
            showVictoryScreen();
        } else {
            newQuestion();
        }
    }

    function wrongAnswer() {
        theAnswerIsCorrect = false;
        selectedAnswer.style.background = "red";
        correctAnswerButton.style.background = "#A0C57F";
    }

    function showVictoryScreen () {
        victoryScreen.style.display = "flex";
    }


    answerButtons.forEach(element => {
        element.addEventListener("click", () => {
            answerButtons.forEach(element => element.style.background = "white");
            selectedAnswer = element;
            element.style.background = "#A0C57F";
        })
    })

    submitButton.addEventListener("click", () => {
        if (!theAnswerHasBeenChecked) {
            checkQuestion();
        } else if (!theAnswerIsCorrect) {
            newQuestion();
        }
    })

    restartButtons.forEach(element => {
        element.addEventListener("click", () => {
            startGame();
        })
    })


</script>
</body>
</html>